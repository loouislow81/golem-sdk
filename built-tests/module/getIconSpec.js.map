{"version":3,"sources":["module/getIconSpec.js"],"names":["assert","chai","log","require","testConvertPng","pngName","done","path","join","__dirname","error","icnsPath","stat","fs","statSync","isTrue","isFile","describe","it","os","platform","warn"],"mappings":";;AACA;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAPA;IASOA,M,GAAUC,c,CAAVD,M;;AACP,IAAME,MAAMC,QAAQ,UAAR,CAAZ;;AAEA;;AAEA,SAASC,cAAT,CAAyBC,OAAzB,EAAkCC,IAAlC,EAAwC;AACtC,+BAAcC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,QAArB,EAA+B,gBAA/B,EAAiDJ,OAAjD,CAAd,EAAyE,UAACK,KAAD,EAAQC,QAAR,EAAqB;AAC5F,QAAID,KAAJ,EAAW;AACTJ,WAAKI,KAAL;AACA;AACD;;AAED,QAAME,OAAOC,aAAGC,QAAH,CAAYH,QAAZ,CAAb;AACAX,WAAOe,MAAP,CAAcH,KAAKI,MAAL,EAAd,EAA6B,mCAA7B;AACAV;AACD,GATD;AAUD;;AAEDW,SAAS,iBAAT,EAA4B,YAAM;AAChCC,KAAG,mBAAH,EAAwB,YAAM;AAC5B,QAAIC,aAAGC,QAAH,OAAkB,QAAtB,EAAgC;AAC9BlB,UAAImB,IAAJ,CAAS,gDAAT;AACA;AACD;;AAEDH,OAAG,+BAAH,EAAoC,UAACZ,IAAD,EAAU;AAC5CF,qBAAe,gBAAf,EAAiCE,IAAjC;AACD,KAFD;;AAIAY,OAAG,gCAAH,EAAqC,UAACZ,IAAD,EAAU;AAC7CF,qBAAe,oBAAf,EAAqCE,IAArC;AACD,KAFD;AAGD,GAbD;AAcD,CAfD","file":"getIconSpec.js","sourcesContent":["// need to subtract 2 from source maps\nimport 'source-map-support/register'\n\nimport chai from 'chai'\nimport fs from 'fs'\nimport os from 'os'\nimport path from 'path'\nimport convertToIcns from './../../lib/helpers/convertToIcns'\n\nconst {assert} = chai\nconst log = require('loglevel')\n\n// Prerequisite for test: to use OSX with sips, iconutil and imagemagick convert\n\nfunction testConvertPng (pngName, done) {\n  convertToIcns(path.join(__dirname, '../../', 'test-resources', pngName), (error, icnsPath) => {\n    if (error) {\n      done(error)\n      return\n    }\n\n    const stat = fs.statSync(icnsPath)\n    assert.isTrue(stat.isFile(), 'Output icns file should be a path')\n    done()\n  })\n}\n\ndescribe('Get Icon Module', () => {\n  it('Can convert icons', () => {\n    if (os.platform() !== 'darwin') {\n      log.warn('Skipping png conversion tests, OSX is required')\n      return\n    }\n\n    it('Can convert a rgb png to icns', (done) => {\n      testConvertPng('iconSample.png', done)\n    })\n\n    it('Can convert a grey png to icns', (done) => {\n      testConvertPng('iconSampleGrey.png', done)\n    })\n  })\n})\n"]}